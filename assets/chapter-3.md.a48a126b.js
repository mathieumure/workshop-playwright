import{_ as t,C as p,o as c,c as r,H as o,w as a,Q as n,k as s,a as l}from"./chunks/framework.7ee9eeab.js";const j=JSON.parse('{"title":"Étape 3 - Ré-assemblage 🔧","description":"","frontmatter":{},"headers":[],"relativePath":"chapter-3.md","filePath":"chapter-3.md"}'),i={name:"chapter-3.md"},y=n(`<h1 id="etape-3-re-assemblage-🔧" tabindex="-1">Étape 3 - Ré-assemblage 🔧 <a class="header-anchor" href="#etape-3-re-assemblage-🔧" aria-label="Permalink to &quot;Étape 3 - Ré-assemblage 🔧&quot;">​</a></h1><p>🎯 L&#39;objectif ici est de modifier notre projet pour qu&#39;il utilise l&#39;API de test de playwright.</p><h2 id="configuration-des-tests" tabindex="-1">Configuration des tests <a class="header-anchor" href="#configuration-des-tests" aria-label="Permalink to &quot;Configuration des tests&quot;">​</a></h2><p>Il est maintenant tant que vous configuriez votre projet pour qu&#39;il puisse lancer des tests automatisés.</p><p>Pour cela, Playwright met à disposition un package dédié <code>@playwright/test</code>.</p><ul><li>Ajoutez cette dépendance sur votre projet</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">pnpm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">@playwright/test</span></span>
<span class="line"><span style="color:#6A737D;"># OR</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">@playwright/test</span></span>
<span class="line"><span style="color:#6A737D;"># OR</span></span>
<span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">@playwright/test</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">pnpm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span><span style="color:#24292E;"> </span><span style="color:#032F62;">@playwright/test</span></span>
<span class="line"><span style="color:#6A737D;"># OR</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span><span style="color:#24292E;"> </span><span style="color:#032F62;">@playwright/test</span></span>
<span class="line"><span style="color:#6A737D;"># OR</span></span>
<span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span><span style="color:#24292E;"> </span><span style="color:#032F62;">@playwright/test</span></span></code></pre></div><p>Ce package s&#39;appuie sur un fichier de configuration <code>playwright.config.js</code> ou <code>playwright.config.ts</code>.</p><ul><li>Ouvrer le fichier de configuration <code>playwright.config.ts</code> situé à la racine du projet.</li></ul><p>En vous appuyant sur <a href="https://playwright.dev/docs/test-configuration" target="_blank" rel="noreferrer">la documentation</a>, configurez-le de la manière suivante :</p><ul><li>Définissez le dossier source des tests pour qu&#39;il soit <code>./src</code></li></ul>`,11),E=s("div",{class:"language-typescript vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"typescript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"config"),s("span",{style:{color:"#F97583"}},":"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"PlaywrightTestConfig"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  testDir: "),s("span",{style:{color:"#9ECBFF"}},"'./src'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"};")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"config"),s("span",{style:{color:"#D73A49"}},":"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"PlaywrightTestConfig"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  testDir: "),s("span",{style:{color:"#032F62"}},"'./src'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"};")])])])],-1),d=s("ul",null,[s("li",null,[l("Définissez le dossier de sortie pour qu'il soit "),s("code",null,"./test-results")])],-1),u=s("div",{class:"language-typescript vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"typescript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"config"),s("span",{style:{color:"#F97583"}},":"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"PlaywrightTestConfig"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  outputDir: "),s("span",{style:{color:"#9ECBFF"}},"'./test-results'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"};")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"config"),s("span",{style:{color:"#D73A49"}},":"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"PlaywrightTestConfig"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  outputDir: "),s("span",{style:{color:"#032F62"}},"'./test-results'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"};")])])])],-1),h=s("ul",null,[s("li",null,[l("Définissez le nombre de re-tentative pour qu'il soit de 1 si "),s("code",null,[l("p"),s("wbr"),l("rocess.env.CI")]),l(" est défini et de 0 sinon")])],-1),g=s("div",{class:"language-typescript vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"typescript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"config"),s("span",{style:{color:"#F97583"}},":"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"PlaywrightTestConfig"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},[l("  retries: p"),s("wbr"),l("rocess.env.")]),s("span",{style:{color:"#79B8FF"}},"CI"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"?"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"1"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},":"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"0"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"};")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"config"),s("span",{style:{color:"#D73A49"}},":"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"PlaywrightTestConfig"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},[l("  retries: p"),s("wbr"),l("rocess.env.")]),s("span",{style:{color:"#005CC5"}},"CI"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"?"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},":"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"0"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"};")])])])],-1),F=s("ul",null,[s("li",null,[l("Créer "),s("a",{href:"https://playwright.dev/docs/test-configuration#multiple-browsers",target:"_blank",rel:"noreferrer"},"un projet"),l(" pour chaque navigateur que l'on souhaite tester "),s("code",null,"chromium desktop"),l(", "),s("code",null,"firefox desktop"),l(" et "),s("code",null,"Pixel 4")])],-1),v=s("div",{class:"language-typescript vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"typescript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"import"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"type"),s("span",{style:{color:"#E1E4E8"}}," { PlaywrightTestConfig, devices } "),s("span",{style:{color:"#F97583"}},"from"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#9ECBFF"}},"'@playwright/test'"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"config"),s("span",{style:{color:"#F97583"}},":"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"PlaywrightTestConfig"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  projects: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      name: "),s("span",{style:{color:"#9ECBFF"}},"'chromium'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      use: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#F97583"}},"..."),s("span",{style:{color:"#E1E4E8"}},"devices["),s("span",{style:{color:"#9ECBFF"}},"'Desktop Chrome'"),s("span",{style:{color:"#E1E4E8"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    },")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      name: "),s("span",{style:{color:"#9ECBFF"}},"'firefox'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      use: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#F97583"}},"..."),s("span",{style:{color:"#E1E4E8"}},"devices["),s("span",{style:{color:"#9ECBFF"}},"'Desktop Firefox'"),s("span",{style:{color:"#E1E4E8"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      name: "),s("span",{style:{color:"#9ECBFF"}},"'Pixel 4'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      use: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#F97583"}},"..."),s("span",{style:{color:"#E1E4E8"}},"devices["),s("span",{style:{color:"#9ECBFF"}},"'Pixel 4'"),s("span",{style:{color:"#E1E4E8"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"};")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"type"),s("span",{style:{color:"#24292E"}}," { PlaywrightTestConfig, devices } "),s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'@playwright/test'"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"config"),s("span",{style:{color:"#D73A49"}},":"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"PlaywrightTestConfig"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  projects: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      name: "),s("span",{style:{color:"#032F62"}},"'chromium'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      use: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"..."),s("span",{style:{color:"#24292E"}},"devices["),s("span",{style:{color:"#032F62"}},"'Desktop Chrome'"),s("span",{style:{color:"#24292E"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    },")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      name: "),s("span",{style:{color:"#032F62"}},"'firefox'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      use: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"..."),s("span",{style:{color:"#24292E"}},"devices["),s("span",{style:{color:"#032F62"}},"'Desktop Firefox'"),s("span",{style:{color:"#24292E"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      name: "),s("span",{style:{color:"#032F62"}},"'Pixel 4'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      use: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"..."),s("span",{style:{color:"#24292E"}},"devices["),s("span",{style:{color:"#032F62"}},"'Pixel 4'"),s("span",{style:{color:"#24292E"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"};")])])])],-1),C=n(`<div class="tip custom-block"><p class="custom-block-title">INFO</p><p>ℹ️ Si vous devez démarrer un server local, playwright peut s&#39;en occuper pour vous avec l&#39;option <a href="https://playwright.dev/docs/api/class-testconfig#test-config-web-server" target="_blank" rel="noreferrer"><code>webServer</code></a></p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { PlaywrightTestConfig } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@playwright/test&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">config</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">PlaywrightTestConfig</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  webServer: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    command: </span><span style="color:#9ECBFF;">&#39;npm run start&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    port: </span><span style="color:#79B8FF;">3000</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    timeout: </span><span style="color:#79B8FF;">10000</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    reuseExistingServer: </span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">p<wbr>rocess.env.</span><span style="color:#79B8FF;">CI</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { PlaywrightTestConfig } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@playwright/test&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">config</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PlaywrightTestConfig</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  webServer: {</span></span>
<span class="line"><span style="color:#24292E;">    command: </span><span style="color:#032F62;">&#39;npm run start&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    port: </span><span style="color:#005CC5;">3000</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    timeout: </span><span style="color:#005CC5;">10000</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    reuseExistingServer: </span><span style="color:#D73A49;">!</span><span style="color:#24292E;">p<wbr>rocess.env.</span><span style="color:#005CC5;">CI</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div></div><h2 id="premiers-tests" tabindex="-1">Premiers tests <a class="header-anchor" href="#premiers-tests" aria-label="Permalink to &quot;Premiers tests&quot;">​</a></h2><p>Pour commencer, nous allons vérifier que le titre de la page est correct.</p><ul><li>Ouvrez le fichier de test <code>./src/chapter_3.spec.ts</code></li></ul><p>Editez le test nommé <code>it should have the correct title</code>:</p><ul><li>Naviguez sur <code>https://playwright-site-madd.vercel.app/</code></li></ul>`,6),m=s("div",{class:"language-typescript vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"typescript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"test"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'it should have the correct title'"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#F97583"}},"async"),s("span",{style:{color:"#E1E4E8"}}," ({ "),s("span",{style:{color:"#FFAB70"}},"page"),s("span",{style:{color:"#E1E4E8"}}," }) "),s("span",{style:{color:"#F97583"}},"=>"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#F97583"}},"await"),s("span",{style:{color:"#E1E4E8"}}," page."),s("span",{style:{color:"#B392F0"}},"goto"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'https://playwright-site-madd.vercel.app/'"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"});")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"test"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'it should have the correct title'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," ({ "),s("span",{style:{color:"#E36209"}},"page"),s("span",{style:{color:"#24292E"}}," }) "),s("span",{style:{color:"#D73A49"}},"=>"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page."),s("span",{style:{color:"#6F42C1"}},"goto"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'https://playwright-site-madd.vercel.app/'"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"});")])])])],-1),f=s("ul",null,[s("li",null,[l("Vérifiez que le titre est bien identique à "),s("code",null,"Welcome to the official website of Microsoft's Advanced Defense Division | Security X technology"),l(", pour cela, vous pouvez utiliser la fonction "),s("a",{href:"https://playwright.dev/docs/test-assertions",target:"_blank",rel:"noreferrer"},[s("code",null,"expect")]),l(" exposée par "),s("code",null,"@playwright/test"),l(" qui étend directement de "),s("a",{href:"https://jestjs.io/",target:"_blank",rel:"noreferrer"},"jest"),l("!")])],-1),_=s("div",{class:"language-typescript vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"typescript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"expect"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#F97583"}},"await"),s("span",{style:{color:"#E1E4E8"}}," page."),s("span",{style:{color:"#B392F0"}},"title"),s("span",{style:{color:"#E1E4E8"}},"())."),s("span",{style:{color:"#B392F0"}},"toEqual"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},`"Welcome to the official website of Microsoft's Advanced Defense Division | Security X technology"`),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// or shorten")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"await"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"expect"),s("span",{style:{color:"#E1E4E8"}},"(page)."),s("span",{style:{color:"#B392F0"}},"toHaveTitle"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},`"Welcome to the official website of Microsoft's Advanced Defense Division | Security X technology"`),s("span",{style:{color:"#E1E4E8"}},");")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"expect"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page."),s("span",{style:{color:"#6F42C1"}},"title"),s("span",{style:{color:"#24292E"}},"())."),s("span",{style:{color:"#6F42C1"}},"toEqual"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},`"Welcome to the official website of Microsoft's Advanced Defense Division | Security X technology"`),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// or shorten")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"expect"),s("span",{style:{color:"#24292E"}},"(page)."),s("span",{style:{color:"#6F42C1"}},"toHaveTitle"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},`"Welcome to the official website of Microsoft's Advanced Defense Division | Security X technology"`),s("span",{style:{color:"#24292E"}},");")])])])],-1),w=n(`<ul><li>Lancez vos tests e2e via la CLI <code>playwright test</code> et vérifiez qu&#39;ils passent correctement</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">pnpm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">playwright</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">test</span></span>
<span class="line"><span style="color:#6A737D;"># OR</span></span>
<span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">playwright</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">test</span></span>
<span class="line"><span style="color:#6A737D;"># OR</span></span>
<span class="line"><span style="color:#B392F0;">./node_modules/.bin/playwright</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">test</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">pnpm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">playwright</span><span style="color:#24292E;"> </span><span style="color:#032F62;">test</span></span>
<span class="line"><span style="color:#6A737D;"># OR</span></span>
<span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">playwright</span><span style="color:#24292E;"> </span><span style="color:#032F62;">test</span></span>
<span class="line"><span style="color:#6A737D;"># OR</span></span>
<span class="line"><span style="color:#6F42C1;">./node_modules/.bin/playwright</span><span style="color:#24292E;"> </span><span style="color:#032F62;">test</span></span></code></pre></div><h2 id="visual-testing" tabindex="-1">Visual testing <a class="header-anchor" href="#visual-testing" aria-label="Permalink to &quot;Visual testing&quot;">​</a></h2><p>Playwright permet également de faire du <a href="https://playwright.dev/docs/test-snapshots" target="_blank" rel="noreferrer">visual testing</a>.</p><ul><li>Dans chacun de ces 2 tests restants, naviguez vers <code>https://playwright.dev/</code></li></ul>`,5),D=s("div",{class:"language-typescript vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"typescript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"test"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'it should have the correct screenshot for light mode'"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#F97583"}},"async"),s("span",{style:{color:"#E1E4E8"}}," ({ "),s("span",{style:{color:"#FFAB70"}},"page"),s("span",{style:{color:"#E1E4E8"}}," }) "),s("span",{style:{color:"#F97583"}},"=>"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#F97583"}},"await"),s("span",{style:{color:"#E1E4E8"}}," page."),s("span",{style:{color:"#B392F0"}},"goto"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'https://playwright-site-madd.vercel.app/'"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"});")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B392F0"}},"test"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'it should have the correct screenshot for dark mode'"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#F97583"}},"async"),s("span",{style:{color:"#E1E4E8"}}," ({ "),s("span",{style:{color:"#FFAB70"}},"page"),s("span",{style:{color:"#E1E4E8"}}," }) "),s("span",{style:{color:"#F97583"}},"=>"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#F97583"}},"await"),s("span",{style:{color:"#E1E4E8"}}," page."),s("span",{style:{color:"#B392F0"}},"goto"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'https://playwright-site-madd.vercel.app/'"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"});")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"test"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'it should have the correct screenshot for light mode'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," ({ "),s("span",{style:{color:"#E36209"}},"page"),s("span",{style:{color:"#24292E"}}," }) "),s("span",{style:{color:"#D73A49"}},"=>"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page."),s("span",{style:{color:"#6F42C1"}},"goto"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'https://playwright-site-madd.vercel.app/'"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"});")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"test"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'it should have the correct screenshot for dark mode'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," ({ "),s("span",{style:{color:"#E36209"}},"page"),s("span",{style:{color:"#24292E"}}," }) "),s("span",{style:{color:"#D73A49"}},"=>"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page."),s("span",{style:{color:"#6F42C1"}},"goto"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'https://playwright-site-madd.vercel.app/'"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"});")])])])],-1),b=s("ul",null,[s("li",null,[l("Émulez le bon "),s("code",null,"colorScheme"),l(" en fonction du test")])],-1),B=s("div",{class:"language-typescript vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"typescript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"await"),s("span",{style:{color:"#E1E4E8"}}," page."),s("span",{style:{color:"#B392F0"}},"emulateMedia"),s("span",{style:{color:"#E1E4E8"}},"({ colorScheme: "),s("span",{style:{color:"#9ECBFF"}},"'dark'"),s("span",{style:{color:"#E1E4E8"}}," });")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"await"),s("span",{style:{color:"#E1E4E8"}}," page."),s("span",{style:{color:"#B392F0"}},"emulateMedia"),s("span",{style:{color:"#E1E4E8"}},"({ colorScheme: "),s("span",{style:{color:"#9ECBFF"}},"'light'"),s("span",{style:{color:"#E1E4E8"}}," });")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page."),s("span",{style:{color:"#6F42C1"}},"emulateMedia"),s("span",{style:{color:"#24292E"}},"({ colorScheme: "),s("span",{style:{color:"#032F62"}},"'dark'"),s("span",{style:{color:"#24292E"}}," });")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page."),s("span",{style:{color:"#6F42C1"}},"emulateMedia"),s("span",{style:{color:"#24292E"}},"({ colorScheme: "),s("span",{style:{color:"#032F62"}},"'light'"),s("span",{style:{color:"#24292E"}}," });")])])])],-1),k=s("ul",null,[s("li",null,[l("Utilisez "),s("code",null,"await expect(page).toHaveScreenshot( /* options */ );"),l(" pour faire un screenshot de la page entière.")])],-1),A=s("div",{class:"language-typescript vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"typescript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"await"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"expect"),s("span",{style:{color:"#E1E4E8"}},"(page)."),s("span",{style:{color:"#B392F0"}},"toHaveScreenshot"),s("span",{style:{color:"#E1E4E8"}},"({ fullPage: "),s("span",{style:{color:"#79B8FF"}},"true"),s("span",{style:{color:"#E1E4E8"}}," });")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"expect"),s("span",{style:{color:"#24292E"}},"(page)."),s("span",{style:{color:"#6F42C1"}},"toHaveScreenshot"),s("span",{style:{color:"#24292E"}},"({ fullPage: "),s("span",{style:{color:"#005CC5"}},"true"),s("span",{style:{color:"#24292E"}}," });")])])])],-1),P=n("<ul><li>Pour générer la première fois vos images, lancez vos tests avec la commande <code>pnpm playwright test --update-snapshots</code> et vérifiez qu&#39;ils sont correctement générés.</li><li>Relancer vos tests normalement et vérifiez qu&#39;ils passent avec la commande <code>pnpm playwright test</code></li></ul><p>Nos agents nous informent que la troisième phrase qui vous permettra de décoder les codes secrets de Microsoft est contenue dans votre screenshot du mode dark pour chromium desktop. Il s&#39;agit de la seconde phrase du premier paragraphe situé sous le titre <code>Commitment to Global Security</code>.</p><p><strong>Notez-la précieusement</strong> dans <code>src/passphrases.txt</code> et vous pouvez passer à la phase 4 du plan !</p>",3);function T(S,x,q,z,I,R){const e=p("Solution");return c(),r("div",null,[y,o(e,null,{default:a(()=>[E]),_:1}),d,o(e,null,{default:a(()=>[u]),_:1}),h,o(e,null,{default:a(()=>[g]),_:1}),F,o(e,null,{default:a(()=>[v]),_:1}),C,o(e,null,{default:a(()=>[m]),_:1}),f,o(e,null,{default:a(()=>[_]),_:1}),w,o(e,null,{default:a(()=>[D]),_:1}),b,o(e,null,{default:a(()=>[B]),_:1}),k,o(e,null,{default:a(()=>[A]),_:1}),P])}const N=t(i,[["render",T]]);export{j as __pageData,N as default};
