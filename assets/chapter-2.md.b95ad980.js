import{_ as s,c as a,o as e,a as n}from"./app.cb8e3dd8.js";var l="/workshop-playwright/assets/chapter2_screenshot.cec577e6.png",o="/workshop-playwright/assets/chapter2_screenshot_dark.9a99c55f.png";const u=JSON.parse('{"title":"\xC9tape 2 - D\xE9sassemblage \u{1F4A5}","description":"","frontmatter":{},"headers":[{"level":2,"title":"Se rendre sur playwright dev","slug":"se-rendre-sur-playwright-dev"},{"level":2,"title":"Screenshot","slug":"screenshot"},{"level":2,"title":"Multi-navigateur","slug":"multi-navigateur"}],"relativePath":"chapter-2.md"}'),p={name:"chapter-2.md"},t=n(`<h1 id="etape-2-desassemblage-\u{1F4A5}" tabindex="-1">\xC9tape 2 - D\xE9sassemblage \u{1F4A5} <a class="header-anchor" href="#etape-2-desassemblage-\u{1F4A5}" aria-hidden="true">#</a></h1><p>\u{1F3AF} L&#39;objectif ici est de d\xE9couvrir l&#39;API de playwright sans s&#39;occuper des tests.</p><h2 id="se-rendre-sur-playwright-dev" tabindex="-1">Se rendre sur playwright dev <a class="header-anchor" href="#se-rendre-sur-playwright-dev" aria-hidden="true">#</a></h2><ul><li><p>Cr\xE9ez un fichier dans <code>src/chapitre_2.ts</code>.</p></li><li><p>Dans ce fichier, importez playwright et dans une fonction asynchrone, lancez un chromium et stockez l&#39;instance dans une variable <a href="https://playwright.dev/docs/api/class-browser" target="_blank" rel="noreferrer"><code>browser</code></a></p></li></ul><div class="language-typescript"><button class="copy"></button><span class="lang">typescript</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> run </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// TODO</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">run</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><ul><li><p>\xC0 partir de ce <code>browser</code>, cr\xE9ez une nouvelle page et stockez-la dans une variable <code>page</code>.</p></li><li><p>Faites naviguer votre page sur <code>https://playwright.dev/</code>.</p></li><li><p>Affichez dans le terminal, la valeur du <code>title</code> de cette page. Vous devriez obtenir</p></li></ul><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">Fast and reliable end-to-end testing for modern web apps | Playwright</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">INFO</p><p>Pensez \xE0 fermer vos pages et vos navigateurs, pour que le programme se termine.</p></div><ul><li>Lancez votre script avec la commande suivante :</li></ul><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">pnpm ts-node src/chapitre_2.ts</span></span>
<span class="line"></span></code></pre></div><ul><li>Modifiez votre script pour lancer le navigateur visuellement, c&#39;est-\xE0-dire sans mode headless.</li></ul><h2 id="screenshot" tabindex="-1">Screenshot <a class="header-anchor" href="#screenshot" aria-hidden="true">#</a></h2><ul><li>Faites un <a href="https://playwright.dev/docs/screenshots" target="_blank" rel="noreferrer">screenshot</a> de la page enti\xE8re dans <code>src/screenshots/homepage.png</code>.</li></ul><p>Vous devriez obtenir <img src="`+l+'" alt="resultat du screenshot"></p><ul><li>Configurez votre page pour avoir une pr\xE9f\xE9rence pour le dark mode gr\xE2ce \xE0 l&#39;API <a href="https://playwright.dev/docs/api/class-page#page-emulate-media" target="_blank" rel="noreferrer"><code>emulateMedia</code></a> et refaites un screenshot dans <code>src/screenshots/homepage_dark.png</code></li></ul><p>Vous devriez obtenir <img src="'+o+`" alt="resultat du screenshot en dark mode"></p><h2 id="multi-navigateur" tabindex="-1">Multi-navigateur <a class="header-anchor" href="#multi-navigateur" aria-hidden="true">#</a></h2><p>Une des puissances de playwright r\xE9side dans son support de plusieurs navigateurs comme <code>chromium</code>, <code>firefox</code> et <code>webkit</code>.</p><div class="tip custom-block"><p class="custom-block-title">INFO</p><p>Playwright poss\xE8de \xE9galement un support exp\xE9rimental d&#39;<a href="https://playwright.dev/docs/api/class-android/" target="_blank" rel="noreferrer">Android</a> et d&#39;<a href="https://playwright.dev/docs/api/class-electron" target="_blank" rel="noreferrer">Electron</a>.</p></div><ul><li>Modifiez votre programme pour qu&#39;il ex\xE9cute ce code \xE9galement avec firefox et/ou webkit. Vous pourriez par exemple passer un param\xE8tre \xE0 la fonction <code>run</code></li></ul><div class="language-typescript"><button class="copy"></button><span class="lang">typescript</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> run </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">browserType</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">firefox</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">chromium</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">webkit</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([</span><span style="color:#82AAFF;">run</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">chromium</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">run</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">firefox</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">run</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">webkit</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">INFO</p><p>Vous pouvez r\xE9cup\xE9rer le nom du navigateur avec la commande</p><div class="language-typescript"><button class="copy"></button><span class="lang">typescript</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> _browserType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> browser</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">browserType</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(_browserType</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">name</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// firefox, chromium or webkit</span></span>
<span class="line"></span></code></pre></div></div><ul><li>\xC9muler un navigateur <code>Pixel 4</code> pr\xE9configur\xE9 grace \xE0 <a href="https://playwright.dev/docs/api/class-playwright#playwright-devices" target="_blank" rel="noreferrer"><code>playwright.devices</code></a></li></ul><div class="language-typescript"><button class="copy"></button><span class="lang">typescript</span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> playwright </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">playwright</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> browser </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> chromium</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">launch</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> contextOption</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">playwright</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">BrowserContextOptions</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">playwright</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">devices[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Pixel 4</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (browserTypeName </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">firefox</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">contextOption</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isMobile</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> mobileContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> browser</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newContext</span><span style="color:#A6ACCD;">(contextOption)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> page </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> mobileContext</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newPage</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">ATTENTION</p><p>Les <code>devices</code> d\xE9finissent une propri\xE9t\xE9 <code>isMobile</code> qui n&#39;est pas compatible avec <code>firefox</code>.</p></div><p>Nos agents nous informent que la seconde phrase qui vous permettra de d\xE9coder les codes secrets de Microsoft est le titre de la page que vous avez affich\xE9 dans votre terminal.</p><p><strong>Notez-la pr\xE9cieusement</strong> et vous pouvez passer \xE0 la phase 3 du plan !</p>`,27),r=[t];function c(i,y,D,d,F,A){return e(),a("div",null,r)}var h=s(p,[["render",c]]);export{u as __pageData,h as default};
