import{_ as n,C as p,o as c,c as r,H as o,w as a,Q as t,k as e,a as s}from"./chunks/framework.7ee9eeab.js";const P=JSON.parse('{"title":"√âtape 5 - Usage avanc√© üöÄ","description":"","frontmatter":{},"headers":[],"relativePath":"chapter-5.md","filePath":"chapter-5.md"}'),i={name:"chapter-5.md"},y=t('<h1 id="etape-5-usage-avance-üöÄ" tabindex="-1">√âtape 5 - Usage avanc√© üöÄ <a class="header-anchor" href="#etape-5-usage-avance-üöÄ" aria-label="Permalink to &quot;√âtape 5 - Usage avanc√© üöÄ&quot;">‚Äã</a></h1><p>üéØ L&#39;objectif ici est de simuler la connexion en oauth2 d&#39;un formulaire.</p><h2 id="simulation-d-un-formulaire" tabindex="-1">Simulation d&#39;un formulaire <a class="header-anchor" href="#simulation-d-un-formulaire" aria-label="Permalink to &quot;Simulation d&#39;un formulaire&quot;">‚Äã</a></h2><p>Nos agents nous informent que la derni√®re pass-phrase et le code de d√©cryptage sont prot√©g√©s derri√®re un formulaire cach√© accessible via l&#39;URL <a href="https://playwright-site-madd.vercel.app/_wpftw_/bluescreenofthedeath" target="_blank" rel="noreferrer">https://playwright-site-madd.vercel.app/<em>wpftw</em>/bluescreenofthedeath</a>.</p><p>Malheureusement, nous avons d√ª exfiltrer l&#39;agent qui n&#39;a pas r√©ussi √† obtenir un login et un password, mais a obtenu un jeton magique.</p><p>Afin d&#39;√©viter tout soup√ßon de la part de leur syst√®me, vous devez √™tre invisibles ! Pour cela, vous allez utiliser les <a href="https://playwright.dev/docs/api/class-route" target="_blank" rel="noreferrer">route</a> playwright.</p><p>√âditez le fichier de test <code>src/chapter_5.spec.ts</code>:</p><ul><li>Dans le hook <code>test.beforeEach</code>, qui est ex√©cut√© avant chaque test, ajoutez une <a href="https://playwright.dev/docs/api/class-route" target="_blank" rel="noreferrer">route</a> playwright sur <code>https://accounts.google.com/ServiceLogin/webreauth</code>. Elle devra faire une redirection 302 qui ajoutera le query param <code>token=&lt;3WindowsVista&lt;3</code></li></ul>',8),d=e("div",{class:"language-typescript vp-adaptive-theme"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"typescript"),e("pre",{class:"shiki github-dark vp-code-dark"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"test."),e("span",{style:{color:"#B392F0"}},"beforeEach"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#F97583"}},"async"),e("span",{style:{color:"#E1E4E8"}}," ({ "),e("span",{style:{color:"#FFAB70"}},"page"),e("span",{style:{color:"#E1E4E8"}}," }) "),e("span",{style:{color:"#F97583"}},"=>"),e("span",{style:{color:"#E1E4E8"}}," {")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"  "),e("span",{style:{color:"#F97583"}},"await"),e("span",{style:{color:"#E1E4E8"}}," page."),e("span",{style:{color:"#B392F0"}},"route"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#9ECBFF"}},"'https://accounts.google.com/ServiceLogin/webreauth'"),e("span",{style:{color:"#E1E4E8"}},", ("),e("span",{style:{color:"#FFAB70"}},"route"),e("span",{style:{color:"#E1E4E8"}},") "),e("span",{style:{color:"#F97583"}},"=>"),e("span",{style:{color:"#E1E4E8"}}," {")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"    route."),e("span",{style:{color:"#B392F0"}},"fulfill"),e("span",{style:{color:"#E1E4E8"}},"({")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"      status: "),e("span",{style:{color:"#79B8FF"}},"302"),e("span",{style:{color:"#E1E4E8"}},",")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"      headers: {")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"        Location: "),e("span",{style:{color:"#9ECBFF"}},"'https://playwright-site-madd.vercel.app/_wpftw_/bluescreenofthedeath?token=<3WindowsVista<3'"),e("span",{style:{color:"#E1E4E8"}},",")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"      },")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"    });")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"  });")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#E1E4E8"}},"});")])])]),e("pre",{class:"shiki github-light vp-code-light"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#24292E"}},"test."),e("span",{style:{color:"#6F42C1"}},"beforeEach"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#D73A49"}},"async"),e("span",{style:{color:"#24292E"}}," ({ "),e("span",{style:{color:"#E36209"}},"page"),e("span",{style:{color:"#24292E"}}," }) "),e("span",{style:{color:"#D73A49"}},"=>"),e("span",{style:{color:"#24292E"}}," {")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#24292E"}},"  "),e("span",{style:{color:"#D73A49"}},"await"),e("span",{style:{color:"#24292E"}}," page."),e("span",{style:{color:"#6F42C1"}},"route"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#032F62"}},"'https://accounts.google.com/ServiceLogin/webreauth'"),e("span",{style:{color:"#24292E"}},", ("),e("span",{style:{color:"#E36209"}},"route"),e("span",{style:{color:"#24292E"}},") "),e("span",{style:{color:"#D73A49"}},"=>"),e("span",{style:{color:"#24292E"}}," {")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#24292E"}},"    route."),e("span",{style:{color:"#6F42C1"}},"fulfill"),e("span",{style:{color:"#24292E"}},"({")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#24292E"}},"      status: "),e("span",{style:{color:"#005CC5"}},"302"),e("span",{style:{color:"#24292E"}},",")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#24292E"}},"      headers: {")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#24292E"}},"        Location: "),e("span",{style:{color:"#032F62"}},"'https://playwright-site-madd.vercel.app/_wpftw_/bluescreenofthedeath?token=<3WindowsVista<3'"),e("span",{style:{color:"#24292E"}},",")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#24292E"}},"      },")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#24292E"}},"    });")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#24292E"}},"  });")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#24292E"}},"});")])])])],-1),E=e("ul",null,[e("li",null,[s("Dans le test nomm√© "),e("code",null,"it should get the last secret phrase"),s(", naviguez vers "),e("code",null,"https://playwright-site-madd.vercel.app/_wpftw_/bluescreenofthedeath")])],-1),u=e("div",{class:"language-typescript vp-adaptive-theme"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"typescript"),e("pre",{class:"shiki github-dark vp-code-dark"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#F97583"}},"await"),e("span",{style:{color:"#E1E4E8"}}," page."),e("span",{style:{color:"#B392F0"}},"goto"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#9ECBFF"}},"'https://playwright-site-madd.vercel.app/_wpftw_/bluescreenofthedeath'"),e("span",{style:{color:"#E1E4E8"}},");")])])]),e("pre",{class:"shiki github-light vp-code-light"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#D73A49"}},"await"),e("span",{style:{color:"#24292E"}}," page."),e("span",{style:{color:"#6F42C1"}},"goto"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#032F62"}},"'https://playwright-site-madd.vercel.app/_wpftw_/bluescreenofthedeath'"),e("span",{style:{color:"#24292E"}},");")])])])],-1),h=e("ul",null,[e("li",null,"Remplissez les champs Login et Password avec des valeurs de votre choix.")],-1),g=e("div",{class:"language-typescript vp-adaptive-theme"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"typescript"),e("pre",{class:"shiki github-dark vp-code-dark"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#F97583"}},"await"),e("span",{style:{color:"#E1E4E8"}}," page."),e("span",{style:{color:"#B392F0"}},"getByLabel"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#9ECBFF"}},"'Login'"),e("span",{style:{color:"#E1E4E8"}},")."),e("span",{style:{color:"#B392F0"}},"fill"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#9ECBFF"}},"'your.name'"),e("span",{style:{color:"#E1E4E8"}},");")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#F97583"}},"await"),e("span",{style:{color:"#E1E4E8"}}," page."),e("span",{style:{color:"#B392F0"}},"getByLabel"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#9ECBFF"}},"'Password'"),e("span",{style:{color:"#E1E4E8"}},")."),e("span",{style:{color:"#B392F0"}},"fill"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#9ECBFF"}},"'pwd1'"),e("span",{style:{color:"#E1E4E8"}},");")])])]),e("pre",{class:"shiki github-light vp-code-light"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#D73A49"}},"await"),e("span",{style:{color:"#24292E"}}," page."),e("span",{style:{color:"#6F42C1"}},"getByLabel"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#032F62"}},"'Login'"),e("span",{style:{color:"#24292E"}},")."),e("span",{style:{color:"#6F42C1"}},"fill"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#032F62"}},"'your.name'"),e("span",{style:{color:"#24292E"}},");")]),s(`
`),e("span",{class:"line"},[e("span",{style:{color:"#D73A49"}},"await"),e("span",{style:{color:"#24292E"}}," page."),e("span",{style:{color:"#6F42C1"}},"getByLabel"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#032F62"}},"'Password'"),e("span",{style:{color:"#24292E"}},")."),e("span",{style:{color:"#6F42C1"}},"fill"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#032F62"}},"'pwd1'"),e("span",{style:{color:"#24292E"}},");")])])])],-1),F=e("ul",null,[e("li",null,"Cliquez sur le bouton de login")],-1),_=e("div",{class:"language-typescript vp-adaptive-theme"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"typescript"),e("pre",{class:"shiki github-dark vp-code-dark"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#F97583"}},"await"),e("span",{style:{color:"#E1E4E8"}}," page."),e("span",{style:{color:"#B392F0"}},"getByText"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#9ECBFF"}},"'Connect'"),e("span",{style:{color:"#E1E4E8"}},")."),e("span",{style:{color:"#B392F0"}},"click"),e("span",{style:{color:"#E1E4E8"}},"();")])])]),e("pre",{class:"shiki github-light vp-code-light"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#D73A49"}},"await"),e("span",{style:{color:"#24292E"}}," page."),e("span",{style:{color:"#6F42C1"}},"getByText"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#032F62"}},"'Connect'"),e("span",{style:{color:"#24292E"}},")."),e("span",{style:{color:"#6F42C1"}},"click"),e("span",{style:{color:"#24292E"}},"();")])])])],-1),v=e("ul",null,[e("li",null,[s("Attendez qu'une navigation ait lieu sur "),e("code",null,"https://playwright-site-madd.vercel.app/_wpftw_/bluescreenofthedeath")])],-1),f=e("div",{class:"language-typescript vp-adaptive-theme"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"typescript"),e("pre",{class:"shiki github-dark vp-code-dark"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#F97583"}},"await"),e("span",{style:{color:"#E1E4E8"}}," page."),e("span",{style:{color:"#B392F0"}},"waitForURL"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#9ECBFF"}},"/"),e("span",{style:{color:"#F97583"}},"^"),e("span",{style:{color:"#DBEDFF"}},"https:"),e("span",{style:{color:"#85E89D","font-weight":"bold"}},"\\/\\/"),e("span",{style:{color:"#DBEDFF"}},"playwright-site-madd"),e("span",{style:{color:"#79B8FF"}},"."),e("span",{style:{color:"#DBEDFF"}},"vercel"),e("span",{style:{color:"#79B8FF"}},"."),e("span",{style:{color:"#DBEDFF"}},"app"),e("span",{style:{color:"#85E89D","font-weight":"bold"}},"\\/"),e("span",{style:{color:"#DBEDFF"}},"_wpftw_"),e("span",{style:{color:"#85E89D","font-weight":"bold"}},"\\/"),e("span",{style:{color:"#DBEDFF"}},"bluescreenofthedeath"),e("span",{style:{color:"#9ECBFF"}},"/"),e("span",{style:{color:"#E1E4E8"}},");")])])]),e("pre",{class:"shiki github-light vp-code-light"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#D73A49"}},"await"),e("span",{style:{color:"#24292E"}}," page."),e("span",{style:{color:"#6F42C1"}},"waitForURL"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#032F62"}},"/"),e("span",{style:{color:"#D73A49"}},"^"),e("span",{style:{color:"#032F62"}},"https:"),e("span",{style:{color:"#22863A","font-weight":"bold"}},"\\/\\/"),e("span",{style:{color:"#032F62"}},"playwright-site-madd"),e("span",{style:{color:"#005CC5"}},"."),e("span",{style:{color:"#032F62"}},"vercel"),e("span",{style:{color:"#005CC5"}},"."),e("span",{style:{color:"#032F62"}},"app"),e("span",{style:{color:"#22863A","font-weight":"bold"}},"\\/"),e("span",{style:{color:"#032F62"}},"_wpftw_"),e("span",{style:{color:"#22863A","font-weight":"bold"}},"\\/"),e("span",{style:{color:"#032F62"}},"bluescreenofthedeath/"),e("span",{style:{color:"#24292E"}},");")])])])],-1),m=e("ul",null,[e("li",null,[s("V√©rifiez que le titre sur la page rendue est bien "),e("code",null,"Your agent page is now unlocked")])],-1),w=e("div",{class:"language-typescript vp-adaptive-theme"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"typescript"),e("pre",{class:"shiki github-dark vp-code-dark"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#F97583"}},"await"),e("span",{style:{color:"#E1E4E8"}}," "),e("span",{style:{color:"#B392F0"}},"expect"),e("span",{style:{color:"#E1E4E8"}},"(page."),e("span",{style:{color:"#B392F0"}},"getByRole"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#9ECBFF"}},"'heading'"),e("span",{style:{color:"#E1E4E8"}},"))."),e("span",{style:{color:"#B392F0"}},"toHaveText"),e("span",{style:{color:"#E1E4E8"}},"("),e("span",{style:{color:"#9ECBFF"}},'"Your agent page is now unlocked"'),e("span",{style:{color:"#E1E4E8"}},");")])])]),e("pre",{class:"shiki github-light vp-code-light"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#D73A49"}},"await"),e("span",{style:{color:"#24292E"}}," "),e("span",{style:{color:"#6F42C1"}},"expect"),e("span",{style:{color:"#24292E"}},"(page."),e("span",{style:{color:"#6F42C1"}},"getByRole"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#032F62"}},"'heading'"),e("span",{style:{color:"#24292E"}},"))."),e("span",{style:{color:"#6F42C1"}},"toHaveText"),e("span",{style:{color:"#24292E"}},"("),e("span",{style:{color:"#032F62"}},'"Your agent page is now unlocked"'),e("span",{style:{color:"#24292E"}},");")])])])],-1),b=e("ul",null,[e("li",null,"Faites ensuite un screenshot pour observer le contenu de la page")],-1),C=e("div",{class:"language-typescript vp-adaptive-theme"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"typescript"),e("pre",{class:"shiki github-dark vp-code-dark"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#F97583"}},"await"),e("span",{style:{color:"#E1E4E8"}}," "),e("span",{style:{color:"#B392F0"}},"expect"),e("span",{style:{color:"#E1E4E8"}},"(page)."),e("span",{style:{color:"#B392F0"}},"toHaveScreenshot"),e("span",{style:{color:"#E1E4E8"}},"();")])])]),e("pre",{class:"shiki github-light vp-code-light"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#D73A49"}},"await"),e("span",{style:{color:"#24292E"}}," "),e("span",{style:{color:"#6F42C1"}},"expect"),e("span",{style:{color:"#24292E"}},"(page)."),e("span",{style:{color:"#6F42C1"}},"toHaveScreenshot"),e("span",{style:{color:"#24292E"}},"();")])])])],-1),B=t('<p><strong>Notez pr√©cieusement</strong> dans <code>src/passphrases.txt</code> le titre de la page ainsi que le key code.</p><p>Bravo ! Vous avez r√©ussi √† r√©cup√©rer l&#39;ensemble des passphrases et des codes ! Il est maintenant tant de d√©chiffrer tout cela</p><h2 id="decoder-le-tout" tabindex="-1">D√©coder le tout <a class="header-anchor" href="#decoder-le-tout" aria-label="Permalink to &quot;D√©coder le tout&quot;">‚Äã</a></h2><p>La cl√© que vous avez r√©cup√©r√©e correspond √† la position de chaque mot dans chacun des phrases.</p><p>Par exemple, si la cl√© est <code>3 4 1+2 3 2</code>, alors la phrase secr√®te sera :</p><p><code>&lt;le 3√®me mot de la phrase de la phase 1&gt; &lt;le 4√®me mot de la phrase de la phase 2&gt; &lt;le 1er et le 2nd mot de la phrase de la phase 3&gt; &lt;le 3√®me mot de la phrase de la phase 4&gt; &lt;le 2nd mot de la phrase de la phase 5&gt;</code></p><p>D√©coder le tout √† main pour trouver les codes secrets de Microsoft!... ou lancer simplement le script <code>npm run decode</code></p><p>Vous avez maintenant acc√®s √† toute la puissance de playwright et c&#39;est ce que nous allons faire dans la derni√®re phase du plan, la phase 6!</p>',8);function k(D,A,x,q,L,S){const l=p("Solution");return c(),r("div",null,[y,o(l,null,{default:a(()=>[d]),_:1}),E,o(l,null,{default:a(()=>[u]),_:1}),h,o(l,null,{default:a(()=>[g]),_:1}),F,o(l,null,{default:a(()=>[_]),_:1}),v,o(l,null,{default:a(()=>[f]),_:1}),m,o(l,null,{default:a(()=>[w]),_:1}),b,o(l,null,{default:a(()=>[C]),_:1}),B])}const V=n(i,[["render",k]]);export{P as __pageData,V as default};
